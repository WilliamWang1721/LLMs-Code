import { createContext, useContext, useMemo, useState } from "react";
import type React from "react";

export type Language = "en" | "zh" | "fr" | "de" | "ru";

const STORAGE_KEY = "fluxa_language";

export const LANGUAGE_OPTIONS: Array<{ code: Language; label: string }> = [
  { code: "en", label: "English" },
  { code: "zh", label: "中文" },
  { code: "fr", label: "Français" },
  { code: "de", label: "Deutsch" },
  { code: "ru", label: "Русский" }
];

type Dictionary = Record<Language, Record<string, string>>;

const DICTIONARY: Dictionary = {
  en: {},
  zh: {
    Discover: "发现",
    Map: "地图",
    List: "列表",
    Brands: "品牌",
    "Add Location": "新增地点",
    "Add Brand": "新增品牌",
    Profile: "个人资料",
    History: "历史记录",
    Album: "相册",
    Cards: "卡册",
    Settings: "设置",
    "Log out": "退出登录",
    Online: "在线",
    Offline: "离线",
    Grid: "网格",
    "Public Card": "公共卡",
    "My Card": "我的卡",
    "Search cards by last 4 digits, alias...": "按后四位或别名搜索卡片...",
    "Sort: Distance": "排序：距离",
    "Sort: Updated": "排序：更新时间",
    Locate: "定位",
    "Locating...": "定位中...",
    Filters: "筛选",
    "Filters On": "筛选已开启",
    "Search Location / Card BIN / Brand...": "搜索地点 / 卡 BIN / 品牌...",
    "Search merchant / address / card / Location ID...": "搜索商户 / 地址 / 卡片 / 地点 ID...",
    "Search brand / category / website...": "搜索品牌 / 类别 / 网站...",
    "Search profile activity...": "搜索个人动态...",
    "Search history...": "搜索历史...",
    "Browsing History": "浏览历史",
    "Recently visited pages and search history": "最近访问的页面和搜索记录",
    All: "全部",
    Today: "今天",
    Clear: "清空",
    "Recent Visits": "最近访问",
    "Last 24 hours": "最近24小时",
    "Traffic Sources": "流量来源",
    "Visits Today": "今日访问",
    "Peak Browsing Hour": "访问高峰时段",
    "No history data. Click All or Today to reload.": "暂无历史数据，点击“全部”或“今天”重新加载。",
    "History cleared": "历史已清空",
    ProfilePhoto: "头像",
    "Edit Profile": "编辑资料",
    "Save Profile": "保存资料",
    "Account Information": "账户信息",
    Name: "姓名",
    Email: "邮箱",
    Location: "地点",
    Joined: "加入时间",
    Bio: "简介",
    "Your Stats": "你的统计",
    "Total Projects": "项目总数",
    "Edits this month": "本月编辑",
    "Merged PRs": "已合并 PR",
    "Activity score this week": "本周活跃评分",
    "Quality score this month": "本月质量评分",
    "Quick Access": "快捷入口",
    Favorites: "收藏",
    "My Profile Photos": "我的头像照片",
    Drafts: "草稿",
    "Recent Activity": "最近动态",
    Refresh: "刷新",
    Refreshed: "已刷新",
    "Locations in View": "视图内地点",
    "AMap Live Layer": "高德实时图层",
    "Showing": "显示",
    of: "共",
    records: "条记录",
    Previous: "上一页",
    Next: "下一页",
    Detail: "详情",
    "Draft Brand": "品牌草稿",
    "Draft Brands": "品牌草稿",
    Trend: "趋势",
    "Actions opened": "操作已展开",
    Overview: "概览",
    Attempt: "尝试",
    Reviews: "评价",
    "Edit Details": "编辑详情",
    "Save Details": "保存详情",
    "View on Map": "在地图查看",
    "Auth Success Rate (7d)": "授权成功率（7天）",
    Healthy: "健康",
    "Higher than avg. (92%)": "高于平均值（92%）",
    "Device Status": "设备状态",
    Stable: "稳定",
    Verified: "已验证",
    "Uptime: 4,213 hrs seamless": "稳定运行：4,213 小时",
    "Supported Networks": "支持的网络",
    "Show All": "显示全部",
    "Unknown Only": "仅未知",
    Unknown: "未知",
    Supported: "支持",
    "No network matched current filter.": "当前筛选下无匹配网络。",
    "Common CVM Methods": "常见 CVM 方式",
    "Limited Only": "仅受限",
    Limited: "受限",
    "Payment Attempts": "支付尝试",
    Add: "新增",
    Added: "已添加",
    "active cards": "张激活卡",
    "Virtual Credit Card": "虚拟信用卡",
    "Physical Charge Card": "实体签账卡",
    "World Elite Card": "世界精英卡",
    "Physical Credit Card": "实体信用卡",
    "Total Attempts": "总尝试次数",
    "Success / Failed": "成功 / 失败",
    "Success Rate": "成功率",
    "Date & Time": "日期和时间",
    "Added By": "添加人",
    "Card & Network": "卡片与网络",
    Method: "方式",
    Status: "状态",
    Success: "成功",
    Declined: "拒绝",
    Failed: "失败",
    "Showing 5 of 60 attempts": "显示 60 次中的 5 次",
    Active: "激活",
    Inactive: "停用",
    "Location Added Successfully": "地点添加成功",
    "Your location has been saved and is now available in the list and map views. You can continue adding another location, jump to detail, or return to your previous page.": "你的地点已保存，现在可在列表和地图中查看。你可以继续添加新地点、前往详情页或返回上一页。",
    Merchant: "商户",
    Network: "网络",
    "Back to List": "返回列表",
    "View Detail": "查看详情",
    "Add Another Location": "继续添加地点",
    "Step 1 of 3: Base Information": "第 1/3 步：基础信息",
    "Step 2 of 3: Transaction Record": "第 2/3 步：交易记录",
    "Step 3 of 3: Device & Acquirer Information": "第 3/3 步：设备与收单信息",
    Cancel: "取消",
    Submit: "提交",
    "Next Step": "下一步",
    "Basic Information & Address": "基础信息与地址",
    Address: "地址",
    "Billing Settings": "账单设置",
    Brand: "品牌",
    "Selected Location": "已选地点",
    "Map Experience": "地图体验",
    "Language & Interface": "语言与界面",
    Theme: "主题",
    Language: "语言",
    "Location Permission": "定位权限",
    "Allow the app to access your location": "允许应用访问你的位置",
    "Show Location Names": "显示地点名称",
    "Display the names of places on the map": "在地图上显示地点名称",
    Explore: "探索",
    "Save Changes": "保存更改",
    Saved: "已保存",
    "Manage your system preferences and billing configuration": "管理系统偏好和计费配置",
    "Profile Photo": "头像",
    "View your profile, activity, and contributions.": "查看你的资料、活动与贡献。",
    "Profile settings and visibility controls.": "资料设置与可见性控制。",
    "Opened:": "已打开：",
    Results: "结果",
    Issues: "问题",
    merchants: "商户",
    attempts: "次尝试",
    "Auto (System Default)": "自动（跟随系统）",
    Light: "浅色",
    Dark: "深色",
    "Set your dashboard theme, light, dark and auto themes": "设置面板主题：浅色、深色或自动",
    "Pinned Location": "已定位地点",
    "Auto-located around Tianhe District": "已自动定位到天河区附近",
    time: "次",
    times: "次",
    Coffee: "咖啡",
    "Fast Food": "快餐",
    Retail: "零售",
    Convenience: "便利店",
    "Coffee & Beverage": "咖啡与饮品",
    "Quick Service": "快餐服务",
    "Coverage 124 stores · 92% online": "覆盖 124 家门店 · 92% 在线",
    "Coverage 198 stores · 89% online": "覆盖 198 家门店 · 89% 在线",
    "Coverage 76 stores · 84% online": "覆盖 76 家门店 · 84% 在线",
    "Issue stores 6 · Last sync 5m ago": "问题门店 6 家 · 5 分钟前同步",
    "Issue stores 14 · Last sync 12m ago": "问题门店 14 家 · 12 分钟前同步",
    "Issue stores 11 · Last sync 23m ago": "问题门店 11 家 · 23 分钟前同步",
    "Owner: Evelyn Chen": "负责人：Evelyn Chen",
    "Owner: Jason Li": "负责人：Jason Li",
    "Owner: Amber Zhao": "负责人：Amber Zhao",
    "↳ Please select Inactive Reason:": "↳ 请选择停用原因：",
    "Merchant Name": "商户名称",
    "e.g. McDonald's": "例如：麦当劳",
    "Select on map": "在地图上选择",
    "Statement Descriptor": "账单描述",
    "e.g. McDonald's Beijing": "例如：麦当劳北京",
    "MCC Code": "MCC 编码",
    "e.g. 5812": "例如：5812",
    "Select brand": "选择品牌",
    "1. Transaction Status": "1. 交易状态",
    "2. Card Info": "2. 卡信息",
    "3. CVM Validation": "3. CVM 验证",
    "4. Payment Method": "4. 支付方式",
    "5. Transaction Time": "5. 交易时间",
    "6. Acquirer Mode": "6. 收单模式",
    "1. Device Status": "1. 设备状态",
    "2. Acquirer": "2. 收单机构",
    "3. Checkout Info": "3. 收银信息",
    "4. POS Configuration": "4. POS 配置",
    "5. Additional Remarks": "5. 补充备注",
    Fault: "故障",
    "No CVM": "无 CVM",
    PIN: "PIN",
    Signature: "签名",
    Contactless: "非接触",
    Insert: "插卡",
    Swipe: "刷卡",
    "Apple Pay": "Apple Pay",
    "Google Pay": "Google Pay",
    Tap: "轻触",
    HCE: "HCE",
    EDC: "EDC",
    DCC: "DCC",
    Year: "年",
    Month: "月",
    Day: "日",
    "Select Acquirer": "选择收单机构",
    "Custom Acquirer (Optional)": "自定义收单机构（可选）",
    "Enter acquirer name if not in list...": "如果列表中没有，请输入收单机构名称...",
    "Staffed Checkout": "人工收银",
    "Self-checkout": "自助收银",
    "Select POS Model": "选择 POS 型号",
    "Custom POS Model (Optional)": "自定义 POS 型号（可选）",
    "Enter model name if not in list...": "如果列表中没有，请输入型号名称...",
    "Notes / Internal Comments": "备注 / 内部评论",
    "Enter any additional information or internal notes here...": "请输入补充信息或内部备注...",
    "Select from Wallet": "从钱包选择",
    "Card Info / Token": "卡信息 / Token",
    "e.g. •••• 4242": "例如：•••• 4242",
    "Temporary Unavailable": "暂时不可用",
    "Maintenance (维修)": "维护中（维修）"
  },
  fr: {
    Discover: "Découvrir",
    Map: "Carte",
    List: "Liste",
    Brands: "Marques",
    "Add Location": "Ajouter un lieu",
    "Add Brand": "Ajouter une marque",
    Profile: "Profil",
    History: "Historique",
    Album: "Album",
    Cards: "Cartes",
    Settings: "Paramètres",
    "Log out": "Se déconnecter",
    Online: "En ligne",
    Offline: "Hors ligne",
    Grid: "Grille",
    "Public Card": "Carte publique",
    "My Card": "Ma carte",
    "Search cards by last 4 digits, alias...": "Rechercher des cartes par 4 derniers chiffres ou alias...",
    "Sort: Distance": "Tri: Distance",
    "Sort: Updated": "Tri: Mis à jour",
    Locate: "Localiser",
    "Locating...": "Localisation...",
    Filters: "Filtres",
    "Filters On": "Filtres activés",
    "Search Location / Card BIN / Brand...": "Rechercher lieu / BIN carte / marque...",
    "Search merchant / address / card / Location ID...": "Rechercher marchand / adresse / carte / ID lieu...",
    "Search brand / category / website...": "Rechercher marque / catégorie / site...",
    "Search profile activity...": "Rechercher activité du profil...",
    "Search history...": "Rechercher dans l'historique...",
    "Browsing History": "Historique de navigation",
    "Recently visited pages and search history": "Pages récemment visitées et historique de recherche",
    All: "Tout",
    Today: "Aujourd'hui",
    Clear: "Effacer",
    "Recent Visits": "Visites récentes",
    "Last 24 hours": "Dernières 24 heures",
    "Traffic Sources": "Sources de trafic",
    "Visits Today": "Visites aujourd'hui",
    "Peak Browsing Hour": "Heure de pointe",
    "No history data. Click All or Today to reload.": "Aucune donnée d'historique. Cliquez sur Tout ou Aujourd'hui pour recharger.",
    "History cleared": "Historique effacé",
    "Edit Profile": "Modifier le profil",
    "Save Profile": "Enregistrer le profil",
    "Account Information": "Informations du compte",
    Name: "Nom",
    Email: "E-mail",
    Location: "Lieu",
    Joined: "Inscrit",
    Bio: "Bio",
    "Your Stats": "Vos statistiques",
    "Total Projects": "Projets totaux",
    "Edits this month": "Modifications ce mois",
    "Merged PRs": "PR fusionnées",
    "Activity score this week": "Score d'activité cette semaine",
    "Quality score this month": "Score qualité ce mois",
    "Quick Access": "Accès rapide",
    Favorites: "Favoris",
    "My Profile Photos": "Mes photos de profil",
    Drafts: "Brouillons",
    "Recent Activity": "Activité récente",
    Refresh: "Actualiser",
    Refreshed: "Actualisé",
    "Locations in View": "Lieux visibles",
    "AMap Live Layer": "Couche en direct AMap",
    records: "enregistrements",
    Previous: "Précédent",
    Next: "Suivant",
    Detail: "Détail",
    Trend: "Tendance",
    Overview: "Aperçu",
    Attempt: "Tentative",
    Reviews: "Avis",
    "Edit Details": "Modifier les détails",
    "Save Details": "Enregistrer les détails",
    "View on Map": "Voir sur la carte",
    "Auth Success Rate (7d)": "Taux de succès Auth (7j)",
    Healthy: "Sain",
    "Higher than avg. (92%)": "Supérieur à la moyenne (92%)",
    "Device Status": "État de l'appareil",
    Stable: "Stable",
    Verified: "Vérifié",
    "Uptime: 4,213 hrs seamless": "Disponibilité : 4 213 h",
    "Supported Networks": "Réseaux pris en charge",
    "Show All": "Tout afficher",
    "Unknown Only": "Inconnu uniquement",
    Unknown: "Inconnu",
    Supported: "Pris en charge",
    "No network matched current filter.": "Aucun réseau ne correspond au filtre.",
    "Common CVM Methods": "Méthodes CVM courantes",
    "Limited Only": "Limité uniquement",
    Limited: "Limité",
    "Payment Attempts": "Tentatives de paiement",
    Add: "Ajouter",
    Added: "Ajouté",
    "active cards": "cartes actives",
    "Virtual Credit Card": "Carte de crédit virtuelle",
    "Physical Charge Card": "Carte de paiement physique",
    "World Elite Card": "Carte World Elite",
    "Physical Credit Card": "Carte de crédit physique",
    "Total Attempts": "Tentatives totales",
    "Success / Failed": "Succès / Échec",
    "Success Rate": "Taux de succès",
    "Date & Time": "Date et heure",
    "Added By": "Ajouté par",
    "Card & Network": "Carte et réseau",
    Method: "Méthode",
    Status: "Statut",
    Success: "Succès",
    Declined: "Refusé",
    Failed: "Échec",
    Active: "Actif",
    Inactive: "Inactif",
    "Location Added Successfully": "Lieu ajouté avec succès",
    Merchant: "Marchand",
    Network: "Réseau",
    "Back to List": "Retour à la liste",
    "View Detail": "Voir le détail",
    "Add Another Location": "Ajouter un autre lieu",
    "Step 1 of 3: Base Information": "Étape 1/3 : Informations de base",
    "Step 2 of 3: Transaction Record": "Étape 2/3 : Enregistrement de transaction",
    "Step 3 of 3: Device & Acquirer Information": "Étape 3/3 : Appareil et acquéreur",
    Cancel: "Annuler",
    Submit: "Soumettre",
    "Next Step": "Étape suivante",
    "Basic Information & Address": "Informations de base et adresse",
    Address: "Adresse",
    "Billing Settings": "Paramètres de facturation",
    Brand: "Marque",
    "Selected Location": "Lieu sélectionné",
    "Map Experience": "Expérience carte",
    "Language & Interface": "Langue et interface",
    Theme: "Thème",
    Language: "Langue",
    "Location Permission": "Autorisation de localisation",
    "Allow the app to access your location": "Autoriser l'application à accéder à votre position",
    "Show Location Names": "Afficher les noms des lieux",
    "Display the names of places on the map": "Afficher les noms des lieux sur la carte",
    Explore: "Explorer",
    "Save Changes": "Enregistrer les modifications",
    Saved: "Enregistré",
    "Manage your system preferences and billing configuration": "Gérez vos préférences système et votre configuration de facturation",
    "Profile Photo": "Photo de profil",
    "View your profile, activity, and contributions.": "Consultez votre profil, votre activité et vos contributions.",
    "Profile settings and visibility controls.": "Paramètres du profil et contrôles de visibilité.",
    "Opened:": "Ouvert :",
    Results: "résultats",
    Issues: "problèmes",
    merchants: "commerçants",
    attempts: "tentatives",
    of: "sur",
    "Auto (System Default)": "Auto (par défaut système)",
    Light: "Clair",
    Dark: "Sombre",
    "Set your dashboard theme, light, dark and auto themes": "Définissez le thème du tableau de bord : clair, sombre ou auto",
    "Pinned Location": "Lieu épinglé",
    "Auto-located around Tianhe District": "Localisé automatiquement autour du district de Tianhe",
    time: "fois",
    times: "fois",
    Coffee: "Café",
    "Fast Food": "Restauration rapide",
    Retail: "Commerce",
    Convenience: "Supérette",
    "Coffee & Beverage": "Café et boissons",
    "Quick Service": "Service rapide",
    "Coverage 124 stores · 92% online": "Couverture 124 magasins · 92% en ligne",
    "Coverage 198 stores · 89% online": "Couverture 198 magasins · 89% en ligne",
    "Coverage 76 stores · 84% online": "Couverture 76 magasins · 84% en ligne",
    "Issue stores 6 · Last sync 5m ago": "Magasins en incident 6 · Dernière synchro il y a 5 min",
    "Issue stores 14 · Last sync 12m ago": "Magasins en incident 14 · Dernière synchro il y a 12 min",
    "Issue stores 11 · Last sync 23m ago": "Magasins en incident 11 · Dernière synchro il y a 23 min",
    "Owner: Evelyn Chen": "Responsable : Evelyn Chen",
    "Owner: Jason Li": "Responsable : Jason Li",
    "Owner: Amber Zhao": "Responsable : Amber Zhao",
    "Your location has been saved and is now available in the list and map views. You can continue adding another location, jump to detail, or return to your previous page.": "Votre lieu a été enregistré et est maintenant disponible dans les vues liste et carte. Vous pouvez ajouter un autre lieu, ouvrir le détail ou revenir à la page précédente.",
    "↳ Please select Inactive Reason:": "↳ Veuillez sélectionner la raison d'inactivité :",
    "Merchant Name": "Nom du marchand",
    "e.g. McDonald's": "ex. McDonald's",
    "Select on map": "Sélectionner sur la carte",
    "Statement Descriptor": "Libellé de relevé",
    "e.g. McDonald's Beijing": "ex. McDonald's Beijing",
    "MCC Code": "Code MCC",
    "e.g. 5812": "ex. 5812",
    "Select brand": "Sélectionner la marque",
    "1. Transaction Status": "1. Statut de transaction",
    "2. Card Info": "2. Infos carte",
    "3. CVM Validation": "3. Validation CVM",
    "4. Payment Method": "4. Méthode de paiement",
    "5. Transaction Time": "5. Heure de transaction",
    "6. Acquirer Mode": "6. Mode acquéreur",
    "1. Device Status": "1. Statut de l'appareil",
    "2. Acquirer": "2. Acquéreur",
    "3. Checkout Info": "3. Infos de caisse",
    "4. POS Configuration": "4. Configuration POS",
    "5. Additional Remarks": "5. Remarques supplémentaires",
    Fault: "Défaut",
    "No CVM": "Sans CVM",
    PIN: "PIN",
    Signature: "Signature",
    Contactless: "Sans contact",
    Insert: "Insérer",
    Swipe: "Balayer",
    "Apple Pay": "Apple Pay",
    "Google Pay": "Google Pay",
    Tap: "Tap",
    HCE: "HCE",
    EDC: "EDC",
    DCC: "DCC",
    Year: "Année",
    Month: "Mois",
    Day: "Jour",
    "Select Acquirer": "Sélectionner l'acquéreur",
    "Custom Acquirer (Optional)": "Acquéreur personnalisé (optionnel)",
    "Enter acquirer name if not in list...": "Saisir le nom de l'acquéreur s'il n'est pas dans la liste...",
    "Staffed Checkout": "Caisse assistée",
    "Self-checkout": "Caisse libre-service",
    "Select POS Model": "Sélectionner le modèle POS",
    "Custom POS Model (Optional)": "Modèle POS personnalisé (optionnel)",
    "Enter model name if not in list...": "Saisir le modèle s'il n'est pas dans la liste...",
    "Notes / Internal Comments": "Notes / commentaires internes",
    "Enter any additional information or internal notes here...": "Saisissez ici des informations supplémentaires ou des notes internes...",
    "Select from Wallet": "Sélectionner depuis le portefeuille",
    "Card Info / Token": "Infos carte / Token",
    "e.g. •••• 4242": "ex. •••• 4242",
    "Temporary Unavailable": "Temporairement indisponible",
    "Maintenance (维修)": "Maintenance (维修)"
  },
  de: {
    Discover: "Entdecken",
    Map: "Karte",
    List: "Liste",
    Brands: "Marken",
    "Add Location": "Ort hinzufügen",
    "Add Brand": "Marke hinzufügen",
    Profile: "Profil",
    History: "Verlauf",
    Album: "Album",
    Cards: "Karten",
    Settings: "Einstellungen",
    "Log out": "Abmelden",
    Online: "Online",
    Offline: "Offline",
    Grid: "Raster",
    "Public Card": "Öffentliche Karte",
    "My Card": "Meine Karte",
    "Search cards by last 4 digits, alias...": "Karten nach letzten 4 Ziffern oder Alias suchen...",
    "Sort: Distance": "Sortieren: Entfernung",
    "Sort: Updated": "Sortieren: Aktualisiert",
    Locate: "Lokalisieren",
    "Locating...": "Wird lokalisiert...",
    Filters: "Filter",
    "Filters On": "Filter aktiv",
    "Browsing History": "Browserverlauf",
    All: "Alle",
    Today: "Heute",
    Clear: "Löschen",
    "Recent Visits": "Letzte Besuche",
    "Last 24 hours": "Letzte 24 Stunden",
    "Traffic Sources": "Traffic-Quellen",
    "Visits Today": "Besuche heute",
    "Peak Browsing Hour": "Spitzenstunde",
    "History cleared": "Verlauf gelöscht",
    "Edit Profile": "Profil bearbeiten",
    "Save Profile": "Profil speichern",
    "Account Information": "Kontoinformationen",
    Name: "Name",
    Email: "E-Mail",
    Location: "Ort",
    Joined: "Beigetreten",
    Bio: "Bio",
    "Your Stats": "Deine Statistiken",
    "Total Projects": "Gesamtprojekte",
    "Edits this month": "Änderungen diesen Monat",
    "Merged PRs": "Gemergte PRs",
    "Quick Access": "Schnellzugriff",
    Favorites: "Favoriten",
    Drafts: "Entwürfe",
    "Recent Activity": "Letzte Aktivität",
    Refresh: "Aktualisieren",
    Refreshed: "Aktualisiert",
    "Locations in View": "Orte in Ansicht",
    Previous: "Zurück",
    Next: "Weiter",
    Detail: "Details",
    Trend: "Trend",
    Overview: "Übersicht",
    Attempt: "Versuch",
    Reviews: "Bewertungen",
    "Edit Details": "Details bearbeiten",
    "Save Details": "Details speichern",
    "View on Map": "Auf Karte anzeigen",
    "Auth Success Rate (7d)": "Auth-Erfolgsrate (7T)",
    Healthy: "Gesund",
    "Device Status": "Gerätestatus",
    Stable: "Stabil",
    Verified: "Verifiziert",
    "Supported Networks": "Unterstützte Netzwerke",
    "Show All": "Alle anzeigen",
    "Unknown Only": "Nur unbekannt",
    Unknown: "Unbekannt",
    Supported: "Unterstützt",
    "Common CVM Methods": "Häufige CVM-Methoden",
    "Limited Only": "Nur eingeschränkt",
    Limited: "Eingeschränkt",
    "Payment Attempts": "Zahlungsversuche",
    Add: "Hinzufügen",
    Added: "Hinzugefügt",
    "active cards": "aktive Karten",
    "Virtual Credit Card": "Virtuelle Kreditkarte",
    "Physical Charge Card": "Physische Charge-Karte",
    "World Elite Card": "World Elite Karte",
    "Physical Credit Card": "Physische Kreditkarte",
    "Total Attempts": "Gesamtversuche",
    "Success / Failed": "Erfolg / Fehlgeschlagen",
    "Success Rate": "Erfolgsrate",
    "Date & Time": "Datum & Uhrzeit",
    "Added By": "Hinzugefügt von",
    "Card & Network": "Karte & Netzwerk",
    Method: "Methode",
    Status: "Status",
    Success: "Erfolg",
    Declined: "Abgelehnt",
    Failed: "Fehlgeschlagen",
    Active: "Aktiv",
    Inactive: "Inaktiv",
    "Location Added Successfully": "Ort erfolgreich hinzugefügt",
    Merchant: "Händler",
    Network: "Netzwerk",
    "Back to List": "Zurück zur Liste",
    "View Detail": "Details ansehen",
    "Add Another Location": "Weiteren Ort hinzufügen",
    "Step 1 of 3: Base Information": "Schritt 1 von 3: Basisinformationen",
    "Step 2 of 3: Transaction Record": "Schritt 2 von 3: Transaktionsdaten",
    "Step 3 of 3: Device & Acquirer Information": "Schritt 3 von 3: Gerät & Acquirer",
    Cancel: "Abbrechen",
    Submit: "Senden",
    "Next Step": "Nächster Schritt",
    "Basic Information & Address": "Grunddaten & Adresse",
    Address: "Adresse",
    "Billing Settings": "Abrechnungseinstellungen",
    Brand: "Marke",
    "Selected Location": "Ausgewählter Ort",
    "Map Experience": "Kartenerlebnis",
    "Language & Interface": "Sprache & Oberfläche",
    Theme: "Thema",
    Language: "Sprache",
    "Location Permission": "Standortberechtigung",
    "Show Location Names": "Ortsnamen anzeigen",
    Explore: "Erkunden",
    "Save Changes": "Änderungen speichern",
    Saved: "Gespeichert",
    "Manage your system preferences and billing configuration": "Verwalte deine Systemeinstellungen und Abrechnungsoptionen",
    "Profile Photo": "Profilfoto",
    "View your profile, activity, and contributions.": "Sieh dir dein Profil, deine Aktivität und deine Beiträge an.",
    "Profile settings and visibility controls.": "Profileinstellungen und Sichtbarkeitskontrollen.",
    "Opened:": "Geöffnet:",
    Results: "Ergebnisse",
    Issues: "Probleme",
    merchants: "Händler",
    attempts: "Versuche",
    of: "von",
    "Auto (System Default)": "Auto (Systemstandard)",
    Light: "Hell",
    Dark: "Dunkel",
    "Set your dashboard theme, light, dark and auto themes": "Lege das Dashboard-Design fest: hell, dunkel oder automatisch",
    "Pinned Location": "Angehefteter Ort",
    "Auto-located around Tianhe District": "Automatisch im Bereich Tianhe lokalisiert",
    time: "Mal",
    times: "Mal",
    Coffee: "Kaffee",
    "Fast Food": "Fast Food",
    Retail: "Einzelhandel",
    Convenience: "Convenience",
    "Coffee & Beverage": "Kaffee & Getränke",
    "Quick Service": "Schnellservice",
    "Coverage 124 stores · 92% online": "Abdeckung 124 Filialen · 92% online",
    "Coverage 198 stores · 89% online": "Abdeckung 198 Filialen · 89% online",
    "Coverage 76 stores · 84% online": "Abdeckung 76 Filialen · 84% online",
    "Issue stores 6 · Last sync 5m ago": "Problemfilialen 6 · Letzte Sync vor 5 Min.",
    "Issue stores 14 · Last sync 12m ago": "Problemfilialen 14 · Letzte Sync vor 12 Min.",
    "Issue stores 11 · Last sync 23m ago": "Problemfilialen 11 · Letzte Sync vor 23 Min.",
    "Owner: Evelyn Chen": "Verantwortlich: Evelyn Chen",
    "Owner: Jason Li": "Verantwortlich: Jason Li",
    "Owner: Amber Zhao": "Verantwortlich: Amber Zhao",
    "Your location has been saved and is now available in the list and map views. You can continue adding another location, jump to detail, or return to your previous page.": "Dein Standort wurde gespeichert und ist jetzt in Listen- und Kartenansicht verfügbar. Du kannst einen weiteren Standort hinzufügen, zur Detailansicht springen oder zur vorherigen Seite zurückkehren.",
    "↳ Please select Inactive Reason:": "↳ Bitte Inaktivitätsgrund auswählen:",
    "No history data. Click All or Today to reload.": "Keine Verlaufsdaten. Klicke auf Alle oder Heute zum Neuladen.",
    "Allow the app to access your location": "Erlaube der App den Zugriff auf deinen Standort",
    "Display the names of places on the map": "Zeige Ortsnamen auf der Karte an",
    "Merchant Name": "Händlername",
    "e.g. McDonald's": "z. B. McDonald's",
    "Select on map": "Auf Karte auswählen",
    "Statement Descriptor": "Abrechnungsbezeichnung",
    "e.g. McDonald's Beijing": "z. B. McDonald's Beijing",
    "MCC Code": "MCC-Code",
    "e.g. 5812": "z. B. 5812",
    "Select brand": "Marke auswählen",
    "1. Transaction Status": "1. Transaktionsstatus",
    "2. Card Info": "2. Karteninfo",
    "3. CVM Validation": "3. CVM-Prüfung",
    "4. Payment Method": "4. Zahlungsmethode",
    "5. Transaction Time": "5. Transaktionszeit",
    "6. Acquirer Mode": "6. Acquirer-Modus",
    "1. Device Status": "1. Gerätestatus",
    "2. Acquirer": "2. Acquirer",
    "3. Checkout Info": "3. Kasseninfo",
    "4. POS Configuration": "4. POS-Konfiguration",
    "5. Additional Remarks": "5. Zusätzliche Hinweise",
    Fault: "Fehler",
    "No CVM": "Kein CVM",
    PIN: "PIN",
    Signature: "Unterschrift",
    Contactless: "Kontaktlos",
    Insert: "Einstecken",
    Swipe: "Durchziehen",
    "Apple Pay": "Apple Pay",
    "Google Pay": "Google Pay",
    Tap: "Tippen",
    HCE: "HCE",
    EDC: "EDC",
    DCC: "DCC",
    Year: "Jahr",
    Month: "Monat",
    Day: "Tag",
    "Select Acquirer": "Acquirer auswählen",
    "Custom Acquirer (Optional)": "Benutzerdefinierter Acquirer (optional)",
    "Enter acquirer name if not in list...": "Acquirer-Namen eingeben, falls nicht in der Liste...",
    "Staffed Checkout": "Bediente Kasse",
    "Self-checkout": "Selbstbedienungskasse",
    "Select POS Model": "POS-Modell auswählen",
    "Custom POS Model (Optional)": "Benutzerdefiniertes POS-Modell (optional)",
    "Enter model name if not in list...": "Modellnamen eingeben, falls nicht in der Liste...",
    "Notes / Internal Comments": "Notizen / interne Kommentare",
    "Enter any additional information or internal notes here...": "Zusätzliche Informationen oder interne Notizen hier eingeben...",
    "Select from Wallet": "Aus Wallet auswählen",
    "Card Info / Token": "Karteninfo / Token",
    "e.g. •••• 4242": "z. B. •••• 4242",
    "Temporary Unavailable": "Vorübergehend nicht verfügbar",
    "Maintenance (维修)": "Wartung (维修)"
  },
  ru: {
    Discover: "Обзор",
    Map: "Карта",
    List: "Список",
    Brands: "Бренды",
    "Add Location": "Добавить точку",
    "Add Brand": "Добавить бренд",
    Profile: "Профиль",
    History: "История",
    Album: "Альбом",
    Cards: "Карты",
    Settings: "Настройки",
    "Log out": "Выйти",
    Online: "Онлайн",
    Offline: "Оффлайн",
    Grid: "Сетка",
    "Public Card": "Публичная карта",
    "My Card": "Моя карта",
    "Search cards by last 4 digits, alias...": "Поиск карт по последним 4 цифрам или алиасу...",
    "Sort: Distance": "Сортировка: расстояние",
    "Sort: Updated": "Сортировка: обновлено",
    Locate: "Найти",
    "Locating...": "Поиск...",
    Filters: "Фильтры",
    "Filters On": "Фильтры включены",
    "Browsing History": "История просмотров",
    All: "Все",
    Today: "Сегодня",
    Clear: "Очистить",
    "Recent Visits": "Недавние посещения",
    "Last 24 hours": "Последние 24 часа",
    "Traffic Sources": "Источники трафика",
    "Visits Today": "Посещений сегодня",
    "Peak Browsing Hour": "Пиковый час",
    "History cleared": "История очищена",
    "Edit Profile": "Редактировать профиль",
    "Save Profile": "Сохранить профиль",
    "Account Information": "Информация аккаунта",
    Name: "Имя",
    Email: "Почта",
    Location: "Локация",
    Joined: "Дата регистрации",
    Bio: "Био",
    "Your Stats": "Ваша статистика",
    "Total Projects": "Всего проектов",
    "Edits this month": "Изменений за месяц",
    "Merged PRs": "Слитые PR",
    "Quick Access": "Быстрый доступ",
    Favorites: "Избранное",
    Drafts: "Черновики",
    "Recent Activity": "Недавняя активность",
    Refresh: "Обновить",
    Refreshed: "Обновлено",
    "Locations in View": "Точек в поле зрения",
    Previous: "Назад",
    Next: "Далее",
    Detail: "Детали",
    Trend: "Тренд",
    Overview: "Обзор",
    Attempt: "Попытки",
    Reviews: "Отзывы",
    "Edit Details": "Редактировать детали",
    "Save Details": "Сохранить детали",
    "View on Map": "Показать на карте",
    "Auth Success Rate (7d)": "Успешная авторизация (7д)",
    Healthy: "Норма",
    "Device Status": "Статус устройства",
    Stable: "Стабильно",
    Verified: "Проверено",
    "Supported Networks": "Поддерживаемые сети",
    "Show All": "Показать все",
    "Unknown Only": "Только неизвестные",
    Unknown: "Неизвестно",
    Supported: "Поддерживается",
    "Common CVM Methods": "Частые методы CVM",
    "Limited Only": "Только ограниченные",
    Limited: "Ограничено",
    "Payment Attempts": "Попытки оплаты",
    Add: "Добавить",
    Added: "Добавлено",
    "active cards": "активных карт",
    "Virtual Credit Card": "Виртуальная кредитная карта",
    "Physical Charge Card": "Физическая платежная карта",
    "World Elite Card": "Карта World Elite",
    "Physical Credit Card": "Физическая кредитная карта",
    "Total Attempts": "Всего попыток",
    "Success / Failed": "Успешно / Ошибка",
    "Success Rate": "Процент успеха",
    "Date & Time": "Дата и время",
    "Added By": "Добавил",
    "Card & Network": "Карта и сеть",
    Method: "Метод",
    Status: "Статус",
    Success: "Успех",
    Declined: "Отклонено",
    Failed: "Ошибка",
    Active: "Активно",
    Inactive: "Неактивно",
    "Location Added Successfully": "Точка успешно добавлена",
    Merchant: "Мерчант",
    Network: "Сеть",
    "Back to List": "Назад к списку",
    "View Detail": "Открыть детали",
    "Add Another Location": "Добавить ещё точку",
    "Step 1 of 3: Base Information": "Шаг 1 из 3: Базовая информация",
    "Step 2 of 3: Transaction Record": "Шаг 2 из 3: Транзакция",
    "Step 3 of 3: Device & Acquirer Information": "Шаг 3 из 3: Устройство и эквайер",
    Cancel: "Отмена",
    Submit: "Отправить",
    "Next Step": "Следующий шаг",
    "Basic Information & Address": "Основная информация и адрес",
    Address: "Адрес",
    "Billing Settings": "Платёжные настройки",
    Brand: "Бренд",
    "Selected Location": "Выбранная точка",
    "Map Experience": "Работа с картой",
    "Language & Interface": "Язык и интерфейс",
    Theme: "Тема",
    Language: "Язык",
    "Location Permission": "Доступ к геолокации",
    "Show Location Names": "Показывать названия точек",
    Explore: "Обзор",
    "Save Changes": "Сохранить изменения",
    Saved: "Сохранено",
    "Manage your system preferences and billing configuration": "Управляйте системными настройками и конфигурацией биллинга",
    "Profile Photo": "Фото профиля",
    "View your profile, activity, and contributions.": "Просматривайте профиль, активность и вклад.",
    "Profile settings and visibility controls.": "Настройки профиля и параметры видимости.",
    "Opened:": "Открыто:",
    Results: "результатов",
    Issues: "проблем",
    merchants: "мерчантов",
    attempts: "попыток",
    of: "из",
    "Auto (System Default)": "Авто (системный)",
    Light: "Светлая",
    Dark: "Тёмная",
    "Set your dashboard theme, light, dark and auto themes": "Настройте тему панели: светлая, тёмная или авто",
    "Pinned Location": "Закреплённая точка",
    "Auto-located around Tianhe District": "Автоопределение рядом с районом Тяньхэ",
    time: "раз",
    times: "раз",
    Coffee: "Кофе",
    "Fast Food": "Фастфуд",
    Retail: "Ритейл",
    Convenience: "Магазин у дома",
    "Coffee & Beverage": "Кофе и напитки",
    "Quick Service": "Быстрое обслуживание",
    "Coverage 124 stores · 92% online": "Покрытие 124 точек · 92% онлайн",
    "Coverage 198 stores · 89% online": "Покрытие 198 точек · 89% онлайн",
    "Coverage 76 stores · 84% online": "Покрытие 76 точек · 84% онлайн",
    "Issue stores 6 · Last sync 5m ago": "Проблемных точек 6 · синхр. 5 мин назад",
    "Issue stores 14 · Last sync 12m ago": "Проблемных точек 14 · синхр. 12 мин назад",
    "Issue stores 11 · Last sync 23m ago": "Проблемных точек 11 · синхр. 23 мин назад",
    "Owner: Evelyn Chen": "Ответственный: Evelyn Chen",
    "Owner: Jason Li": "Ответственный: Jason Li",
    "Owner: Amber Zhao": "Ответственный: Amber Zhao",
    "Your location has been saved and is now available in the list and map views. You can continue adding another location, jump to detail, or return to your previous page.": "Точка сохранена и теперь доступна в списке и на карте. Вы можете добавить ещё точку, перейти в детали или вернуться на предыдущую страницу.",
    "↳ Please select Inactive Reason:": "↳ Выберите причину неактивности:",
    "No history data. Click All or Today to reload.": "Нет данных истории. Нажмите «Все» или «Сегодня», чтобы перезагрузить.",
    "Allow the app to access your location": "Разрешить приложению доступ к геопозиции",
    "Display the names of places on the map": "Показывать названия мест на карте",
    "Merchant Name": "Название мерчанта",
    "e.g. McDonald's": "напр. McDonald's",
    "Select on map": "Выбрать на карте",
    "Statement Descriptor": "Описание в выписке",
    "e.g. McDonald's Beijing": "напр. McDonald's Beijing",
    "MCC Code": "MCC код",
    "e.g. 5812": "напр. 5812",
    "Select brand": "Выберите бренд",
    "1. Transaction Status": "1. Статус транзакции",
    "2. Card Info": "2. Данные карты",
    "3. CVM Validation": "3. Проверка CVM",
    "4. Payment Method": "4. Способ оплаты",
    "5. Transaction Time": "5. Время транзакции",
    "6. Acquirer Mode": "6. Режим эквайера",
    "1. Device Status": "1. Статус устройства",
    "2. Acquirer": "2. Эквайер",
    "3. Checkout Info": "3. Инфо кассы",
    "4. POS Configuration": "4. Конфигурация POS",
    "5. Additional Remarks": "5. Дополнительные заметки",
    Fault: "Сбой",
    "No CVM": "Без CVM",
    PIN: "PIN",
    Signature: "Подпись",
    Contactless: "Бесконтактно",
    Insert: "Вставка",
    Swipe: "Провести",
    "Apple Pay": "Apple Pay",
    "Google Pay": "Google Pay",
    Tap: "Касание",
    HCE: "HCE",
    EDC: "EDC",
    DCC: "DCC",
    Year: "Год",
    Month: "Месяц",
    Day: "День",
    "Select Acquirer": "Выберите эквайера",
    "Custom Acquirer (Optional)": "Пользовательский эквайер (необязательно)",
    "Enter acquirer name if not in list...": "Введите имя эквайера, если его нет в списке...",
    "Staffed Checkout": "Касса с сотрудником",
    "Self-checkout": "Самообслуживание",
    "Select POS Model": "Выберите модель POS",
    "Custom POS Model (Optional)": "Пользовательская модель POS (необязательно)",
    "Enter model name if not in list...": "Введите название модели, если её нет в списке...",
    "Notes / Internal Comments": "Заметки / внутренние комментарии",
    "Enter any additional information or internal notes here...": "Введите дополнительную информацию или внутренние заметки...",
    "Select from Wallet": "Выбрать из кошелька",
    "Card Info / Token": "Данные карты / токен",
    "e.g. •••• 4242": "напр. •••• 4242",
    "Temporary Unavailable": "Временно недоступно",
    "Maintenance (维修)": "Обслуживание (维修)"
  }
};

interface I18nContextValue {
  language: Language;
  setLanguage: (language: Language) => void;
  t: (text: string) => string;
}

const I18nContext = createContext<I18nContextValue | null>(null);

export function I18nProvider({ children }: { children: React.ReactNode }): React.JSX.Element {
  const [language, setLanguageState] = useState<Language>(() => {
    const stored = typeof window !== "undefined" ? window.localStorage.getItem(STORAGE_KEY) : null;
    if (stored === "zh" || stored === "fr" || stored === "de" || stored === "ru" || stored === "en") {
      return stored;
    }
    return "en";
  });

  const setLanguage = (nextLanguage: Language): void => {
    setLanguageState(nextLanguage);
    if (typeof window !== "undefined") {
      window.localStorage.setItem(STORAGE_KEY, nextLanguage);
    }
  };

  const value = useMemo<I18nContextValue>(
    () => ({
      language,
      setLanguage,
      t: (text: string) => {
        if (language === "en") return text;
        return DICTIONARY[language][text] ?? text;
      }
    }),
    [language]
  );

  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;
}

export function useI18n(): I18nContextValue {
  const context = useContext(I18nContext);
  if (!context) {
    throw new Error("useI18n must be used within I18nProvider");
  }
  return context;
}
